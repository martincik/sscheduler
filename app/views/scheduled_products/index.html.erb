<% form_tag schedule_path do -%>

  <div>
    <label>Schedule from</label>
    <%= text_field_tag 'from_time', @from_time, {:class => @checked_dates } %>
    <%= text_field_tag 'from_date', @from_date, {:class => @checked_dates } %>
    <label>until</label>
    <%= text_field_tag 'to_time', @to_time, {:class => @checked_dates } %>
    <%= text_field_tag 'to_date', @to_date, {:class => @checked_dates } %>
    <%= submit_tag 'schedule', {:id => 'schedule'} %>
    <%= submit_tag 'unschedule', {:id => 'unschedule'} %>
  </div>

  <table cellpadding="0" cellspacing="0" id="product-table">
    <thead>
      <tr>
        <th>&nbsp;</th>
        <th>Name</th>
        <th>Price (<%= current_shop.shop.currency %>)</th>
        <th>Type</th>
        <th>Visible from</th>
        <th>Visible to</th>
        <th>Published</th>
      </tr>
    </thead>
    <tbody>
      <% @products.each do |product| %>
      <tr>
        <td>
          <%= checkbox_with_selection_for_scheduled_product(product, 
            @products_ids.include?(product.id.to_s), @checked_products) %>
        </td>
        <td><%= link_to product.title, "http://#{current_shop.url}/admin/products/#{product.id}" %></td>
        <td><%= product.price_range %></td>
        <td><%= product.product_type %></td>
        <td><%= product.from_time.to_s %></td>
        <td><%= product.to_time.to_s %></td>
        <td><%= is_published(product.published_at) %></td>
      </tr>
      <% end -%>
    </tbody>
  </table>
<% end -%>

<script type="text/javascript"> 
//<![CDATA[
  $("#from_time").ptTimeSelect(); 
  $("#to_time").ptTimeSelect();
  
  $("#from_date").datepicker({ dateFormat: "mm/dd/yy" }); 
  $("#to_date").datepicker({ dateFormat: "mm/dd/yy" });
  
  $("#product-table").dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers"
  });
//]]>
</script>